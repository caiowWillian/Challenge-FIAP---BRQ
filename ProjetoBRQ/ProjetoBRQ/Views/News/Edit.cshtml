@model ProjetoBRQ.Models.News

@{
    ViewBag.Title = "Create";
}

@using (Html.BeginForm("Edit", "News", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    <div class="form-group">
        @Html.LabelFor(m => m.Title)
        @Html.TextBoxFor(m => m.Title, new { @class = "form-control" })
    </div>
    <div class="form-group">
        @Html.LabelFor(m => m.Description)
        @Html.TextBoxFor(m => m.Description, new { @class = "form-control" })
    </div>
    <div class="form-group">
        @Html.LabelFor(m => m.Body)
        @Html.TextAreaFor(m => m.Body, new { @class = "form-control" })
    </div>

    <input type="file" name="File" id="File">

    <button class="btn btn-default" type="submit">Submeter</button>
}
<div id="file-content"></div>
<h2>Create</h2>

@if ((Model.ImgNews != null) && Model.ImgNews.FirstOrDefault() != null)
{
    <img src="@Model.ImgNews.FirstOrDefault().Base64Image()" height="200" id="pw" alt="Prévia da imagem...">
}
else
{
    <img src="" height="200" id="pw" alt="Prévia da imagem...">
}

<img src="" height="200" id="pw" alt="Prévia da imagem...">
<script>
    $('#File').change(function () { previewFile() });

    function previewFile() {
        var preview = document.getElementById('pw');
        var file = document.getElementById('File').files[0];
        var reader = new FileReader();

        reader.onloadend = function () {
            preview.src = reader.result;
        }

        if (file) {
            reader.readAsDataURL(file);
        } else {
            preview.src = "";
        }
    }
</script>